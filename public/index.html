<!doctype html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>RU+ | Sistema de Recarga</title>
        <link rel="shortcut icon" href="src/Logo.png" type="image/png" />
        <link rel="stylesheet" href="css/style.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        />
    </head>
    <body>
        <!-- Cabeçalho -->
        <header>
            <div class="header-logo">
                <img src="src/Logo.png" alt="Logo RU+" />
                <span class="logo-titulo">
                    Sistema de Recarga do Cartão <br />do Restaurante
                    Universitário
                </span>
            </div>

            <div class="user-info">
                <i class="fa-solid fa-user"></i>

                <!-- Formulário de login -->
                <div id="login-form" class="matricula-info">
                    <label for="matricula-input">Matrícula:</label>
                    <input
                        type="text"
                        id="matricula-input"
                        placeholder="Digite sua matrícula"
                    />
                    <button
                        id="btn-carregar-matricula"
                        aria-label="Carregar Dados"
                    >
                        <i class="fa-solid fa-rotate-right"></i>
                    </button>
                </div>

                <!-- Exibição do usuário logado -->
                <div
                    id="user-display"
                    class="matricula-info"
                    style="display: none"
                >
                    <div class="matricula-text">
                        <span>Matrícula:</span>
                        <span id="matricula-logada"></span>
                    </div>
                    <button id="btn-sair" type="button">
                        <i class="fa-solid fa-right-from-bracket"></i> Sair
                    </button>
                </div>
            </div>
        </header>

        <!-- Conteúdo principal -->
        <main>
            <div class="notificacao-sucesso" style="display: none; background-color: #0CC2AA; color: white; text-align: center; padding: 15px; position: fixed; top: 0; left: 0; width: 100%; z-index: 1001;"></div>
            <!-- Dashboard -->
            <section id="dashboard">
                <div class="dashboard-header">
                    <div class="saldo">
                        Informe sua matrícula para visualizar seu saldo
                    </div>
                    <button
                        class="btn-recarga-main"
                        id="btn-ir-recarga"
                        style="display: none"
                    >
                        Recarga
                    </button>
                </div>

                <!-- Extrato -->
                <div class="extrato">
                    <table class="extrato-tabela">
                        <thead>
                            <tr>
                                <th>Data e Hora</th>
                                <th>Lançamento</th>
                                <th>Valor</th>
                            </tr>
                        </thead>
                        <tbody id="extrato-dados"></tbody>
                    </table>
                    <div class="paginacao" id="paginacao-container"></div>
                </div>
            </section>

            <!-- Tela de Recarga -->
            <section id="recarga" style="display: none">
                <div class="recarga-container">
                    <h2>Recarga do Cartão do Restaurante Universitário</h2>

                    <!-- Valor da recarga -->
                    <div class="valor">
                        <div class="input-valor">
                            <label for="valor-recarga"
                                >Informe o valor desejado</label
                            >
                            <input
                                type="text"
                                id="valor-recarga"
                                placeholder="Digite o valor com vírgula"
                            />
                        </div>
                    </div>

                    <!-- Métodos de pagamento -->
                    <div class="pagamento">
                        <label>Selecione a forma de pagamento</label>
                        <div class="forma-pagamento">
                            <button
                                class="btn-pagamento"
                                data-pagamento="credito"
                            >
                                <i class="fa-solid fa-credit-card"></i> Cartão
                                de Crédito
                            </button>
                            <button
                                class="btn-pagamento"
                                data-pagamento="debito"
                            >
                                <i class="fa-regular fa-credit-card"></i> Cartão
                                de Débito
                            </button>
                            <button class="btn-pagamento" data-pagamento="pix">
                                <i class="fa-brands fa-pix"></i> PIX
                            </button>
                        </div>
                    </div>

                    <!-- Formulário Cartão Crédito/Débito -->
                    <div
                        id="cartao-form"
                        class="opcao-pagamento"
                        style="display: none"
                    >
                        <label for="nome-cartao">Nome no Cartão:</label>
                        <input
                            id="nome-cartao"
                            type="text"
                            placeholder="Nome impresso no cartão"
                        />

                        <label for="numero-cartao">Número do Cartão:</label>
                        <input
                            id="numero-cartao"
                            type="text"
                            placeholder="Número do cartão"
                        />

                        <label for="validade-cartao">Validade:</label>
                        <input
                            id="validade-cartao"
                            type="text"
                            placeholder="MM/AA"
                        />

                        <label for="cvv-cartao">CVV:</label>
                        <input id="cvv-cartao" type="text" placeholder="CVV" />
                    </div>

                    <!-- Opção PIX -->
                    <div
                        id="pix-info"
                        class="opcao-pagamento"
                        style="display: none"
                    >
                        <p>
                            Use a chave abaixo para realizar a recarga via PIX:
                        </p>
                        <input
                            type="text"
                            id="pix-chave"
                            value="ru+@exemplo.com"
                            readonly
                        />
                        <button type="button" onclick="copiarChavePIX()">
                            Copiar Chave PIX
                        </button>
                    </div>

                    <!-- Botões principais -->
                    <button type="button" id="btn-recarregar-agora">
                        Recarregar Agora
                    </button>
                    <button
                        type="button"
                        id="btn-voltar-dashboard"
                        class="btn-link"
                    >
                        Voltar para Tela Inicial
                    </button>
                </div>
            </section>
        </main>
        <!-- Comprovante -->
        <div id="comprovante" class="modal-overlay" style="display: none;">
                <div class="modal-content">
                    <div class="comprovante-header">
                    <i class="fa-solid fa-credit-card"></i>
                    <span>Comprovante de Recarga Digital</span>
                </div>

                <div class="comprovante-body">
                    <p class="comprovante-texto">
                        A <strong>Recarga</strong> no valor de <strong>R$ <span id="comprovante-valor"></span></strong> 
                        foi realizada com sucesso no cartão do Restaurante 
                        Universitário de <strong>matrícula</strong> número <strong><span id="comprovante-matricula"></span></strong>.
                    </p>

                    <div class="comprovante-saldo">
                        Saldo Atual: R$ <span id="comprovante-saldo-valor"></span>
                    </div>
                </div>

                <div class="comprovante-footer">
                    <a href="#" id="comprovante-btn-fechar">Voltar para a Tela Inicial</a>
                </div>
                    </div>
                </div>
            </div>

        <!-- Scripts -->
        <script type="module" src="/js/main.js"></script>
        <script>
            // Torna a função de copiar PIX acessível globalmente
            function copiarChavePIX() {
                const pixChave = document.getElementById("pix-chave");
                pixChave.select();
                pixChave.setSelectionRange(0, 99999);
                navigator.clipboard
                    .writeText(pixChave.value)
                    .then(() => alert("Chave PIX copiada!"))
                    .catch(() => alert("Falha ao copiar a chave PIX."));
            }
            window.copiarChavePIX = copiarChavePIX;
        </script>
    </body>
</html>
